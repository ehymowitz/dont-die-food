<% if @user_input_ing.blank? %>
    <%= simple_form_for [ @user, @food_trade ] do |f|%>
      <div class="form-group">
      <%= f.association :user_owned_ingredient, collection: @ingredients_name, label: 'Name of the food', value: 'food' %>
      <%= f.input :category, label: 'Category', collection: ["Veggies", "Fruits", "Dairy", "Meats", "Other"] %>
      <%= f.input :description, label: 'Description', value: "avocado?" %>
      <%= f.input :location, label: 'Address' %>

      <label for="cloudinary-fileupload">Upload a photo</label>
      <%= cl_image_upload_tag(:image_id,
        :tags => "directly_uploaded",
        :crop => :limit, :width => 1000, :height => 1000,
        :eager => [{ :crop => :fill, :width => 150, :height => 100 }])  %>
    </div>
    <%= f.button :submit, 'Share', class: "button-dark mx-auto mt-4", style: "display: block;" %>
  <% end %>

<% else %>
  <%= simple_form_for [ @user, @food_trade ] do |f|%>
    <% @user_input_ing.each_with_index do |ingredient, index| %>
      <%= render 'form_subcomponent', f: f, ingredient: ingredient %>
      <% unless index == @user_input_ing.length - 1 %>
        <object data="<%= asset_path("icons/dotted-line.svg") %>" type="image/svg+xml" style="margin: auto; display: block; padding: 10px 0" ></object>
      <% end %>
    <% end %>
    <%= f.button :submit, 'Share', class: "button-dark mx-auto mt-4", style: "display: block;" %>
  <% end %>
<% end %>
